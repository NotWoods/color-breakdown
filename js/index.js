var t,e,o,n,l,r,i={},a=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function _(t,e){for(var o in e)t[o]=e[o];return t}function u(t){var e=t.parentNode;e&&e.removeChild(t)}function c(t,e,o){var n,l=arguments,r={};for(n in e)"key"!==n&&"ref"!==n&&(r[n]=e[n]);if(arguments.length>3)for(o=[o],n=3;n<arguments.length;n++)o.push(l[n]);if(null!=o&&(r.children=o),"function"==typeof t&&null!=t.defaultProps)for(n in t.defaultProps)void 0===r[n]&&(r[n]=t.defaultProps[n]);return d(t,r,e&&e.key,e&&e.ref,null)}function d(e,o,n,l,r){var i={type:e,props:o,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r};return null==r&&(i.__v=i),t.vnode&&t.vnode(i),i}function p(t){return t.children}function f(t,e){this.props=t,this.context=e}function v(t,e){if(null==e)return t.__?v(t.__,t.__.__k.indexOf(t)+1):null;for(var o;e<t.__k.length;e++)if(null!=(o=t.__k[e])&&null!=o.__e)return o.__e;return"function"==typeof t.type?v(t):null}function h(t){var e,o;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(o=t.__k[e])&&null!=o.__e){t.__e=t.__c.base=o.__e;break}return h(t)}}function m(r){(!r.__d&&(r.__d=!0)&&e.push(r)&&!o++||l!==t.debounceRendering)&&((l=t.debounceRendering)||n)(g)}function g(){for(var t;o=e.length;)t=e.sort((function(t,e){return t.__v.__b-e.__v.__b})),e=[],t.some((function(t){var e,o,n,l,r,i,a;t.__d&&(i=(r=(e=t).__v).__e,(a=e.__P)&&(o=[],(n=_({},r)).__v=n,l=x(a,r,n,e.__n,void 0!==a.ownerSVGElement,null,o,null==i?v(r):i),S(o,r),l!=i&&h(r)))}))}function y(t,e,o,n,l,r,s,_,c){var d,p,f,h,m,g,y,k=o&&o.__k||a,C=k.length;if(_==i&&(_=null!=r?r[0]:C?v(o,0):null),d=0,e.__k=b(e.__k,(function(o){if(null!=o){if(o.__=e,o.__b=e.__b+1,null===(f=k[d])||f&&o.key==f.key&&o.type===f.type)k[d]=void 0;else for(p=0;p<C;p++){if((f=k[p])&&o.key==f.key&&o.type===f.type){k[p]=void 0;break}f=null}if(h=x(t,o,f=f||i,n,l,r,s,_,c),(p=o.ref)&&f.ref!=p&&(y||(y=[]),f.ref&&y.push(f.ref,null,o),y.push(p,o.__c||h,o)),null!=h){var a;if(null==g&&(g=h),void 0!==o.__d)a=o.__d,o.__d=void 0;else if(r==f||h!=_||null==h.parentNode){t:if(null==_||_.parentNode!==t)t.appendChild(h),a=null;else{for(m=_,p=0;(m=m.nextSibling)&&p<C;p+=2)if(m==h)break t;t.insertBefore(h,_),a=_}"option"==e.type&&(t.value="")}_=void 0!==a?a:h.nextSibling,"function"==typeof e.type&&(e.__d=_)}else _&&f.__e==_&&_.parentNode!=t&&(_=v(f))}return d++,o})),e.__e=g,null!=r&&"function"!=typeof e.type)for(d=r.length;d--;)null!=r[d]&&u(r[d]);for(d=C;d--;)null!=k[d]&&L(k[d],k[d]);if(y)for(d=0;d<y.length;d++)M(y[d],y[++d],y[++d])}function b(t,e,o){if(null==o&&(o=[]),null==t||"boolean"==typeof t)e&&o.push(e(null));else if(Array.isArray(t))for(var n=0;n<t.length;n++)b(t[n],e,o);else o.push(e?e("string"==typeof t||"number"==typeof t?d(null,t,null,null,t):null!=t.__e||null!=t.__c?d(t.type,t.props,t.key,null,t.__v):t):t);return o}function k(t,e,o){"-"===e[0]?t.setProperty(e,o):t[e]="number"==typeof o&&!1===s.test(e)?o+"px":null==o?"":o}function C(t,e,o,n,l){var r,i,a,s,_;if(l?"className"===e&&(e="class"):"class"===e&&(e="className"),"style"===e)if(r=t.style,"string"==typeof o)r.cssText=o;else{if("string"==typeof n&&(r.cssText="",n=null),n)for(s in n)o&&s in o||k(r,s,"");if(o)for(_ in o)n&&o[_]===n[_]||k(r,_,o[_])}else"o"===e[0]&&"n"===e[1]?(i=e!==(e=e.replace(/Capture$/,"")),a=e.toLowerCase(),e=(a in t?a:e).slice(2),o?(n||t.addEventListener(e,w,i),(t.l||(t.l={}))[e]=o):t.removeEventListener(e,w,i)):"list"!==e&&"tagName"!==e&&"form"!==e&&"type"!==e&&"size"!==e&&!l&&e in t?t[e]=null==o?"":o:"function"!=typeof o&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/^xlink:?/,""))?null==o||!1===o?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),o):null==o||!1===o&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,o))}function w(e){this.l[e.type](t.event?t.event(e):e)}function x(e,o,n,l,r,i,a,s,u){var c,d,v,h,m,g,b,k,C,w,x=o.type;if(void 0!==o.constructor)return null;(c=t.__b)&&c(o);try{t:if("function"==typeof x){if(k=o.props,C=(c=x.contextType)&&l[c.__c],w=c?C?C.props.value:c.__:l,n.__c?b=(d=o.__c=n.__c).__=d.__E:("prototype"in x&&x.prototype.render?o.__c=d=new x(k,w):(o.__c=d=new f(k,w),d.constructor=x,d.render=H),C&&C.sub(d),d.props=k,d.state||(d.state={}),d.context=w,d.__n=l,v=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=x.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=_({},d.__s)),_(d.__s,x.getDerivedStateFromProps(k,d.__s))),h=d.props,m=d.state,v)null==x.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==x.getDerivedStateFromProps&&k!==h&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(k,w),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(k,d.__s,w)||o.__v===n.__v&&!d.__){for(d.props=k,d.state=d.__s,o.__v!==n.__v&&(d.__d=!1),d.__v=o,o.__e=n.__e,o.__k=n.__k,d.__h.length&&a.push(d),c=0;c<o.__k.length;c++)o.__k[c]&&(o.__k[c].__=o);break t}null!=d.componentWillUpdate&&d.componentWillUpdate(k,d.__s,w),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(h,m,g)}))}d.context=w,d.props=k,d.state=d.__s,(c=t.__r)&&c(o),d.__d=!1,d.__v=o,d.__P=e,c=d.render(d.props,d.state,d.context),o.__k=null!=c&&c.type==p&&null==c.key?c.props.children:Array.isArray(c)?c:[c],null!=d.getChildContext&&(l=_(_({},l),d.getChildContext())),v||null==d.getSnapshotBeforeUpdate||(g=d.getSnapshotBeforeUpdate(h,m)),y(e,o,n,l,r,i,a,s,u),d.base=o.__e,d.__h.length&&a.push(d),b&&(d.__E=d.__=null),d.__e=!1}else null==i&&o.__v===n.__v?(o.__k=n.__k,o.__e=n.__e):o.__e=E(n.__e,o,n,l,r,i,a,u);(c=t.diffed)&&c(o)}catch(e){o.__v=null,t.__e(e,o,n)}return o.__e}function S(e,o){t.__c&&t.__c(o,e),e.some((function(o){try{e=o.__h,o.__h=[],e.some((function(t){t.call(o)}))}catch(e){t.__e(e,o.__v)}}))}function E(t,e,o,n,l,r,s,_){var u,c,d,p,f,v=o.props,h=e.props;if(l="svg"===e.type||l,null!=r)for(u=0;u<r.length;u++)if(null!=(c=r[u])&&((null===e.type?3===c.nodeType:c.localName===e.type)||t==c)){t=c,r[u]=null;break}if(null==t){if(null===e.type)return document.createTextNode(h);t=l?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,h.is&&{is:h.is}),r=null,_=!1}if(null===e.type)v!==h&&t.data!=h&&(t.data=h);else{if(null!=r&&(r=a.slice.call(t.childNodes)),d=(v=o.props||i).dangerouslySetInnerHTML,p=h.dangerouslySetInnerHTML,!_){if(v===i)for(v={},f=0;f<t.attributes.length;f++)v[t.attributes[f].name]=t.attributes[f].value;(p||d)&&(p&&d&&p.__html==d.__html||(t.innerHTML=p&&p.__html||""))}(function(t,e,o,n,l){var r;for(r in o)"children"===r||"key"===r||r in e||C(t,r,null,o[r],n);for(r in e)l&&"function"!=typeof e[r]||"children"===r||"key"===r||"value"===r||"checked"===r||o[r]===e[r]||C(t,r,e[r],o[r],n)})(t,h,v,l,_),p?e.__k=[]:(e.__k=e.props.children,y(t,e,o,n,"foreignObject"!==e.type&&l,r,s,i,_)),_||("value"in h&&void 0!==(u=h.value)&&u!==t.value&&C(t,"value",u,v.value,!1),"checked"in h&&void 0!==(u=h.checked)&&u!==t.checked&&C(t,"checked",u,v.checked,!1))}return t}function M(e,o,n){try{"function"==typeof e?e(o):e.current=o}catch(e){t.__e(e,n)}}function L(e,o,n){var l,r,i;if(t.unmount&&t.unmount(e),(l=e.ref)&&(l.current&&l.current!==e.__e||M(l,null,o)),n||"function"==typeof e.type||(n=null!=(r=e.__e)),e.__e=e.__d=void 0,null!=(l=e.__c)){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(e){t.__e(e,o)}l.base=l.__P=null}if(l=e.__k)for(i=0;i<l.length;i++)l[i]&&L(l[i],o,n);null!=r&&u(r)}function H(t,e,o){return this.constructor(t,o)}function D(e,o,n){var l,s,_;t.__&&t.__(e,o),s=(l=n===r)?null:n&&n.__k||o.__k,e=c(p,null,[e]),_=[],x(o,(l?o:n||o).__k=e,s||i,i,void 0!==o.ownerSVGElement,n&&!l?[n]:s?null:a.slice.call(o.childNodes),_,n||i,l),S(_,e)}function A(t){return{class:`swatch ${t.id}`,hidden:null==t.displayColor,style:{"background-color":t.displayColor,color:t.textColor}}}function P(t){return c("button",Object.assign({},A(t)),c("span",{class:"swatch-description"},t.children),c("span",{class:"swatch-text"},t.displayColor))}function V(t){return c("span",Object.assign({},A(t)))}function T(t){var e;e=t.currentTarget.src,"blob:"===new URL(e).protocol&&URL.revokeObjectURL(e)}function B(t){var e,o,n,l,r,i;return c("li",{class:"grid-item"},c("a",{href:`#i${t.id}`,id:`i${t.id}`},c("div",{class:"grid-item-img-box"},c("img",{class:"grid-item-img",alt:t.name,src:t.imgSrc,width:"144",height:"144",onLoad:T})),c("div",{class:"grid-colors vibrant"},c(V,{id:"dark-vibrant",displayColor:null===(e=t.colors.darkVibrant)||void 0===e?void 0:e.color}),c(V,{id:"dark-muted",displayColor:null===(o=t.colors.darkMuted)||void 0===o?void 0:o.color}),c(V,{id:"vibrant",displayColor:null===(n=t.colors.vibrant)||void 0===n?void 0:n.color}),c(V,{id:"muted",displayColor:null===(l=t.colors.muted)||void 0===l?void 0:l.color}),c(V,{id:"light-vibrant",displayColor:null===(r=t.colors.lightVibrant)||void 0===r?void 0:r.color}),c(V,{id:"light-muted",displayColor:null===(i=t.colors.lightMuted)||void 0===i?void 0:i.color}))))}function F(t){const e=t.items.map((t=>c(B,{key:t.timestamp.toString(),id:t.timestamp,name:t.name,imgSrc:t.imgSrc,colors:t.colors})));return c("ul",{id:"grid-items",class:"grid-list"},e)}t={__e:function(t,e){for(var o,n;e=e.__;)if((o=e.__c)&&!o.__)try{if(o.constructor&&null!=o.constructor.getDerivedStateFromError&&(n=!0,o.setState(o.constructor.getDerivedStateFromError(t))),null!=o.componentDidCatch&&(n=!0,o.componentDidCatch(t)),n)return m(o.__E=o)}catch(e){t=e}throw t}},f.prototype.setState=function(t,e){var o;o=this.__s!==this.state?this.__s:this.__s=_({},this.state),"function"==typeof t&&(t=t(o,this.props)),t&&_(o,t),null!=t&&this.__v&&(e&&this.__h.push(e),m(this))},f.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),m(this))},f.prototype.render=p,e=[],o=0,n="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,r=i;const U="#FFFFFF",R="#000000",N=new Map([[1,{timestamp:1,imgSrc:"img/demo/andrew-hughes-261571-unsplash.jpg",name:"Photo by Andrew Hughes on Unsplash",colors:{vibrant:{color:"#AE340E",textColor:U},darkVibrant:{color:"#6C140C",textColor:U},lightVibrant:{color:"#DACC9B",textColor:R},muted:{color:"#9F805F",textColor:U},darkMuted:{color:"#3B3945",textColor:U},lightMuted:{color:"#DAD3B0",textColor:R}}}],[2,{timestamp:2,imgSrc:"img/demo/ever-wild-634729-unsplash.jpg",name:"Photo by ever wild on Unsplash",colors:{vibrant:{color:"#FBA409",textColor:R},darkVibrant:{color:"#7C0404",textColor:U},lightVibrant:{color:"#F9A250",textColor:R},muted:{color:"#AC784C",textColor:U},darkMuted:{color:"#8C6C44",textColor:U},lightMuted:{color:"#BC987A",textColor:R}}}],[3,{timestamp:3,imgSrc:"img/demo/will-turner-1244879-unsplash.jpg",name:"Photo by Will Turner on Unsplash",colors:{vibrant:{color:"#1E8EE0",textColor:U},darkVibrant:{color:"#061C2C",textColor:U},lightVibrant:{color:"#8AC4EF",textColor:R},muted:{color:"#777C80",textColor:U},darkMuted:{color:"#253D4C",textColor:U},lightMuted:{color:"#BBBCC4",textColor:R}}}]]),j=document.querySelector("#grid-items-container"),$=new Map(N);function W(){D(c(F,{items:Array.from($.values())}),j)}var I,O,G,q=0,z=[],X=t.__r,Y=t.diffed,J=t.__c,K=t.unmount;function Q(e,o){t.__h&&t.__h(O,e,q||o),q=0;var n=O.__H||(O.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function Z(t){return q=1,function(t,e,o){var n=Q(I++,2);return n.__c||(n.__c=O,n.__=[o?o(e):nt(void 0,e),function(e){var o=t(n.__[0],e);n.__[0]!==o&&(n.__[0]=o,n.__c.setState({}))}]),n.__}(nt,t)}function tt(){z.some((function(e){if(e.__P)try{e.__H.__h.forEach(et),e.__H.__h.forEach(ot),e.__H.__h=[]}catch(o){return e.__H.__h=[],t.__e(o,e.__v),!0}})),z=[]}function et(t){t.t&&t.t()}function ot(t){var e=t.__();"function"==typeof e&&(t.t=e)}function nt(t,e){return"function"==typeof e?e(t):e}function lt(t){switch(t.colorTextType){case"RGB":case"HSL":const e=function(t){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(null==e)return;return[e[1],e[2],e[3]].map((t=>parseInt(t,16)))}(t.hexColor);if(null==e)return t.hexColor;const[o,n,l]=e;if("RGB"===t.colorTextType)return`rgb(${o}, ${n}, ${l})`;const[r,i,a]=function(t,e,o){t/=255,e/=255,o/=255;let n,l,r=Math.max(t,e,o),i=Math.min(t,e,o),a=(r+i)/2;if(r===i)n=l=0;else{let s=r-i;switch(l=a>.5?s/(2-r-i):s/(r+i),r){case t:n=(e-o)/s+(e<o?6:0);break;case e:n=(o-t)/s+2;break;case o:n=(t-e)/s+4;break;default:throw new Error}n/=6}return[n,l,a]}(o,n,l).map((t=>Math.round(100*t)));return`hsl(${r}, ${i}, ${a})`;case"HEX":default:return t.hexColor}}t.__r=function(t){X&&X(t),I=0,(O=t.__c).__H&&(O.__H.__h.forEach(et),O.__H.__h.forEach(ot),O.__H.__h=[])},t.diffed=function(e){Y&&Y(e);var o=e.__c;if(o){var n=o.__H;n&&n.__h.length&&(1!==z.push(o)&&G===t.requestAnimationFrame||((G=t.requestAnimationFrame)||function(t){var e,o=function(){clearTimeout(n),cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(o,100);"undefined"!=typeof window&&(e=requestAnimationFrame(o))})(tt))}},t.__c=function(e,o){o.some((function(e){try{e.__h.forEach(et),e.__h=e.__h.filter((function(t){return!t.__||ot(t)}))}catch(n){o.some((function(t){t.__h&&(t.__h=[])})),o=[],t.__e(n,e.__v)}})),J&&J(e,o)},t.unmount=function(e){K&&K(e);var o=e.__c;if(o){var n=o.__H;if(n)try{n.__.forEach((function(t){return t.t&&t.t()}))}catch(e){t.__e(e,o.__v)}}};const rt=navigator.clipboard||import("./clipboard-polyfill-7a6df023.js");async function it(t){const e=t.target.closest("button.swatch"),o=e&&e.querySelector(".swatch-text"),n=o&&o.textContent;if(n){const t=await rt;await t.writeText(n)}}function at(t){var e,o,n,l,r,i,a,s,_,u,d,p,f,v,h,m,g,y,b,k,C,w,x,S;const[E,M]=Z("HEX");function L(t){if(null!=t)return lt({colorTextType:E,hexColor:t})}return c("div",{class:"colors palette-colors",onClick:it},c("header",{class:"toolbar palette-color-controls"},c("select",{class:"color-display",id:"color-display",value:E,onChange:t=>M(t.currentTarget.value)},c("option",{value:"HEX"},"HEX"),c("option",{value:"RGB"},"RGB"),c("option",{value:"HSL"},"HSL"))),c(P,{id:"dark-vibrant",textColor:null===(o=null===(e=t.colors)||void 0===e?void 0:e.darkVibrant)||void 0===o?void 0:o.textColor,displayColor:L(null===(l=null===(n=t.colors)||void 0===n?void 0:n.darkVibrant)||void 0===l?void 0:l.color)},"Dark Vibrant"),c(P,{id:"dark-muted",textColor:null===(i=null===(r=t.colors)||void 0===r?void 0:r.darkMuted)||void 0===i?void 0:i.textColor,displayColor:L(null===(s=null===(a=t.colors)||void 0===a?void 0:a.darkMuted)||void 0===s?void 0:s.color)},"Dark Muted"),c(P,{id:"vibrant",textColor:null===(u=null===(_=t.colors)||void 0===_?void 0:_.vibrant)||void 0===u?void 0:u.textColor,displayColor:L(null===(p=null===(d=t.colors)||void 0===d?void 0:d.vibrant)||void 0===p?void 0:p.color)},"Vibrant"),c(P,{id:"muted",textColor:null===(v=null===(f=t.colors)||void 0===f?void 0:f.muted)||void 0===v?void 0:v.textColor,displayColor:L(null===(m=null===(h=t.colors)||void 0===h?void 0:h.muted)||void 0===m?void 0:m.color)},"Muted"),c(P,{id:"light-vibrant",textColor:null===(y=null===(g=t.colors)||void 0===g?void 0:g.lightVibrant)||void 0===y?void 0:y.textColor,displayColor:L(null===(k=null===(b=t.colors)||void 0===b?void 0:b.lightVibrant)||void 0===k?void 0:k.color)},"Light Vibrant"),c(P,{id:"light-muted",textColor:null===(w=null===(C=t.colors)||void 0===C?void 0:C.lightMuted)||void 0===w?void 0:w.textColor,displayColor:L(null===(S=null===(x=t.colors)||void 0===x?void 0:x.lightMuted)||void 0===S?void 0:S.color)},"Light Muted"))}function st(t){var e;return c("img",{class:"palette-image",alt:null!=t.imgSrc?t.name:"No image",src:null!==(e=t.imgSrc)&&void 0!==e?e:"img/placeholder.svg",onLoad:T})}function _t(t){return c("header",{class:"toolbar transparent-toolbar"},c("button",{id:"back",type:"button",class:"toolbar-button white-button back",onClick:t.onBackClicked},c("span",{class:"btn-label left"},"Back"),c("svg",{height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg"},c("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}))),c("h2",{class:"toolbar-title"}),c("button",{id:"delete",type:"button",class:"toolbar-button white-button",onClick:function(){const e=t.openItem;null!=e&&t.postMessage({type:"DELETE",payload:{timestamp:e,current:!0}})}},c("span",{class:"btn-label"},"Delete"),c("svg",{height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg"},c("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}))))}function ut(e){var o,n,l,r;return function(e,o){var n=Q(I++,3);!t.__s&&function(t,e){return!t||e.some((function(e,o){return e!==t[o]}))}(n.__H,o)&&(n.__=e,n.__H=o,O.__H.__h.push(n))}((()=>{const t=null!=e.data?`${e.data.name} | Color Breakdown`:"Color Breakdown",o=null!=e.data?`#i${e.data.timestamp}`:"";document.title=t,o!==location.hash&&history.replaceState(void 0,t,o||".")})),c("article",{class:"app-screen "+(e.data?"is-open":""),id:"palette"},c(_t,{openItem:null===(o=e.data)||void 0===o?void 0:o.timestamp,postMessage:e.postMessage,onBackClicked:function(){e.firstLoad||history.back()}}),c(st,{name:null===(n=e.data)||void 0===n?void 0:n.name,imgSrc:null===(l=e.data)||void 0===l?void 0:l.imgSrc}),c(at,{colors:null===(r=e.data)||void 0===r?void 0:r.colors}))}const ct=document.querySelector("#palette-container");function dt(t,e){switch(console.log(t.type,t.payload),t.type){case"ADD":return void function(t){for(const e of t.items)$.set(e.timestamp,e);W()}({items:t.payload});case"REMOVE":return void function(t){for(const e of t.timestamps)$.delete(e);W()}({timestamps:t.payload});case"DISPLAY":return o={data:t.payload.entry,firstLoad:t.payload.firstLoad,postMessage:e},void D(c(ut,Object.assign({},o)),ct);case"ERROR":return void console.error(t.payload)}var o}const pt=import("../lib/node-vibrant/vibrant.js");async function ft({name:t,url:e}){const{default:o}=await pt,n=await o.from(e).getPalette();function l(t){if(t)return{color:t.getHex(),textColor:t.getBodyTextColor()}}return{timestamp:Date.now(),colors:{vibrant:l(n.Vibrant),darkVibrant:l(n.DarkVibrant),lightVibrant:l(n.LightVibrant),muted:l(n.Muted),darkMuted:l(n.DarkMuted),lightMuted:l(n.LightMuted)},imgSrc:e,name:t}}const vt={passive:!0},ht=new Worker("js/db-worker.js");function mt(t){ht.postMessage(t)}const gt=document.querySelector("#new-palette-entry"),yt=gt.elements.namedItem("imagefile");async function bt(){mt({type:"SAVE",payload:await function(t){const e=Array.from(t||[]).filter((t=>null!=t.type.match(/^image\//))).map((t=>({name:t.name,url:URL.createObjectURL(t)})));return Promise.all(e.map(ft))}(yt.files)})}function kt(t){const e=location.hash.startsWith("#i")?parseInt(location.hash.slice("#i".length),10):void 0;console.log(e),null!=e?mt({type:"OPEN",payload:{timestamp:e,firstLoad:t}}):dt({type:"DISPLAY",payload:{firstLoad:!1}},mt)}kt(!0),window.addEventListener("hashchange",(()=>kt(!1))),ht.addEventListener("message",(t=>dt(t.data,mt))),gt.addEventListener("submit",(t=>{t.preventDefault(),bt()})),yt.addEventListener("change",bt,vt),yt.addEventListener("focus",(()=>yt.classList.add("focus")),vt),yt.addEventListener("blur",(()=>yt.classList.remove("focus")),vt),import("../lib/insights.js").then((t=>{t.init("BRUajm5Rl0FGGGhk"),t.trackPages()}));
//# sourceMappingURL=index.js.map
